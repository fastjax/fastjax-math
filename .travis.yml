# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P deploy;
  else
    mvn -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: UH5PsgEpvL8RLZrC+P8QmtD1GpGbLzxsT8//m2ajjG0T+W2OAauXilc4gWRlTJNSXnnijRcVDNZYIjPI5/dC3eWj6NsZqzkC5tW3o8yW60rBX1NW6O4VW577SfcVhSt5bKgtT7EpwgxqTeoZvoO0M6SQCgW6WEfkUOZz+mObGoWdbEHYeLnhduIijmMY+3fzT0LksFoAz36oRsqTDp+Dgy2nt/qn66VGMWsdDAmD57RLu88iiX8oSmKWy2uaN3OCNm3DwTmWs5PUdXnT/qvGrm//RXoF9/C8k2Lr3a11zY6LcKHi3mf8CdPuGYpbv1CSWW0u7epg4Q+nPLu8u958hIShjd6RwjfT6ljWdBr6qkZpzHBI6cPX4YeBWeygjoAsvH/HVLkVyPAlPl94MJSBp5lzPWdkc2KXFp4OJRVk4vbC7ahxgJ2dekSHiLu0ZkFhdJ/a/gTwIsx2ku1Wng+B6l7lluzhnjHXpFl54Res6vX3EJy5uriSeAn7t0X3huCfYb/Vd7lbcI4tcH9nR85eQVlh676HkrEE2YQ4zIFznQ8e9MBV/3bTFMkMfpccbbHMEHT5YTQUWG8lQJpBKe5ZbQ73M8/cJBaS2oDEKkYxKtNQWNiA/J9Wu+GO6fSb+IlJPaAaIl+aCeCEd+c3ya3IPlyh6pUeJROg8FZvJekR7SA=
  - secure: bP1ZJtqU8fTCKDwTgjvOISpbpfBRRMuS0/ogvjNKtDe07WZxkCeeUaT5Bh0WX6qFyc/IZNcoo6kMamaAVElzk9u2LlVjS2uLmuO2rgOpne75IlrmYC+IFZWPhOX97wjOJGJYxKQh6Pugh4Gznp5Zq+KH5fw40+BqtzTcFgLOgH4av10bhkzUC8CNxRJiltTmVvt3cLuX4X5o/jMJvAC6G1vnirGFgTY0n3g1MXcLlTejW14/8jw5Qkxswgu+QScr9kberirWXt6mzdLBGC3f1GKbi3y5Tqy8urM96/GkSvN6UneHA0XWfPZPdp44MKs6ifTTpV8TYdBMN4vJg7+qMDIxcdAa3d2+d7Xd4kB3XJ1Ev95xJHLEH/lanH/Qzq1YX+RD4TKReXNvEieAjHfsPgrLo4t//F5aDJusK2a/gm7LK82wThUd1bIn4fqBHwaTEc1kBh3OkCnCCa7BBtQ5+XTKPOqG7fV/xEON7Dr+joiCutb8TjTYWPUMFDtO/V23mQ6FAlLHeDYi1ZhV4z/qPyrJKqhs/5DPQ+NFYRxyd0sar4Brzw0C5lfl3cVAXKshH8VUbwrvUjByMsrkjWW+1Eax6EqQ6ZvKer6JMEXGBzrFVz50LkN39gh+2T8/SLOcxQLL7SchTBDbRDQmfDZJHu6yOXb4xvOguoaPncuA/U0=
  - secure: Voml1UzfUpe00Q60FZ3Rk0DsBnnclkAqPjCw5kFjbRzcbOhEl7j93CNKD+Kd3ANbuE+e1mXWwhiGhMbHpZk2iog7xFQJBDJodVTsKYyhnNLhni7S0JNIZfYfmz5JuHBcXJVT7jGN/sKbFOCRGj/GgIOaJypwtC4IyjSdUwdOKpyOTbIpvMrJIpycp9lub8T311w2LTE/4XVgBWcLRtg1iamCFBir4/OJyBEmWxggf2Xg3C+BeGA2KZ1IuJULf1IP0sPs5OSkp1rHsf4KKDcdLI7dZ+Mj+kgKB/ku1eWjlnq72id0++KjHtKN2qaoWwLspufoazlexrSGbGWGqePTQ1Hl/A3M5w97iFwZdYcpfxF015OO1gOR8QHLx+CyuQE0AyDuZxxxlxyNpFuYLcCUuuU3tAORnEsGqMKL1iDV4TCH1ghAPLMM0tTwjGK8DR6NFUqW8KicgHhpyofyLZTeHE92nL7RHipnjE5mcMjYpjLAMH2LUVKZ76EdWTSWEVcUNz6JMl2wmuFb9mjvQMfQjaTzGNvunapIGo/N+emb/+Fwpblpf9gm+q5PfRXPZTymirvvpG0fiQvfQqrRLKJvoZDMfrva8010YPUzHhiDINZUt3O9c5PvtaEj0xUMHwRbjYaIZmo/HKaxFmH+MLfECX0CNT/UB05C4J8YFZd48hc=
  - secure: X9JyDyO4VGuL7/n/rmCXGsnHRHakqDFGB0DDClj8XoQnvjprKUtF/rQpP7uQdUemxvkMSlC3tOrkZiC/jih7eDJjEUos5WJxKIBURnU3GC1/TXPdLZ+Lh4m3SQANjk8nm0WV2maIBvANhGk43uWC7zUBHk9ADhvwwVeZ3FsykQ4OVUWe+CvrSTU3/bXTieOOHXTDoDGGTH77n8uBomncu0L/sjCOAvhbLX0bwVpFnZvEyzfGf41gIlsTVjaVdb9HTxwsNH0ijApwatviVmGwEQ9noMrsjZDPq08HBXk6wXFo7T7sSnCBNOx55m9k+isIBuKxQDiRb6ieInhKrDIygJ0vBENR+X9K4WEi0ZAiMN5xxUruAGU5p1mssg3omEp3XB+ZW0BGfhN63+8wL+0nDomZewvB4IUmcWCR7EfJLnNHsxUOfr0CPfotLT51iGGR2WWxtkU5CZLxyamkenBsbq5kMYlNRT35tWCrBnrhIhnboSAn0w0FUdA/9M7C4/QlhDCtdBlVxKj+ZkuQZDyiCDXINmaSHIj+N8Rg95ph7yjWK9pjf6J7Au+sLQoHLd6fEkuuxJqVX00+RBu0751l0GkgtWrJsMm7CpuDauoY90xwLjtBvLLBmgXbMa21HNz/r4EDRzpoTdtpYRlptj+dQ6gc6/VGQDaZ6Bq0RsCn8DM=
  - secure: rNPkVJBugbM/Arg4KpKr2vnm1cP0qN/VQx3QZxJK5o3+F/v5TVHH4pJDkSLp3gMg+TRT4tDzAJrcR+ZyjeErBYv2ljVVC+bmcKptdd+GARvT0KbwDkzVD1wTwiCaf1dbPlNVsSI4zJ62CNle4xnQImAhxxP6SpyemhHjWx6gWDMyYc6jN+2iyTR/pTATGAYjf1L0pzbypplfNlRBphy9pyDiMlj/nQnw05cVFWZZ7tORUpJcH5/uRTzF1r190HByi+1+VAQpSQAJK7qCSarqsT3nnnbOpLvWBrgRposqlPUigbjOp7ky25utrY74tl1OGDdJnUHpdF4/yS08vpDDwezoxIObhLLYZFI1GM4P+eEhJhTIlDx3pV/n3Bwo4qnD1wJldu6nDNKqri1gwOu0Mc62/TC/XJxUgD+LC2dMtUklmWsQkMEUxtjtJBTj9tSIPqG4alZ0Hkh0kqY2PkNbRVtOIqj1V6XCB+5OuzzjXNsg85dkLUoJsnx1rFbHksk9BDiBM+oVz1IzUDoLMyUpSTXfviABEe7cAWJGwA91MT3ECPg2uB+BtewG1gm8GVC0nwHfyoox8SnGNw3ryfseKWNCpL5wKZD1ny0+KbZ1keIuv5iEzjjWXx/DvnoHONkCvGQHuDaD2PSel3n4ObwiKPBx5lR05YQMhu4/cWrA3Lo=
  - secure: QuI8nNVUZiRikBIWFv7s92+oN8c0KBn6fAGGkiSVeOz++012zkqmCHfz3c2AGMxbv2DhR+OcWLWdmpWnU5nPGPeyOxVZc2c/11twGkI1H4UAkZEobHAwx5f0OdGkolCQIMiJnKHJLp0abPEDzwpvJM/kr+0SKOcn6FEGWBita+fzTju1DN4TLglcHI5Dn4L/g3D4yjIr04o/jDKqxVDA+FiEWXfVRjmfaQjc0ZNhj2ib2/JVmhTht1ck1nIQoGroEIo4V8hIlT0UgNecM74ZtFi/ulKuvzjhWmULGnUgFpDZRIKCwaX5fMMx8xui81XelTVKaps880RF4xkMPPhXXszv6UAlh7uF/B1YMgo044dzZfl+RzhC+ht4NHPIIOlJUqmrWarULwI+sr56D5+WQ01oRS4l+Mhh0Al42s8Up4egWuHsh5GdQZyx8C8JX5nJeC/nsVg3o+RUtvPEYXt4m+x1VuEyRWnHUmsT+9kcbPMpSXCo6v4RxG7tv2sKSfZzW2MtZ50bE5VOEMNbYWuBC36xDEexEfgaELty/dloLib/u9XzBnuqAI+0JWS88rtJw2dGemAsEiLdr4QSRaSrRKFjPAfKDVHpDCI+X24HvdhyDKJI30YIebt3MEOPbU6TMwzJIgSKkRCSdHA/MLYDdhJRrkvLRvwAQ/E14Z394ek=
  - secure: A8f/AceEo25chfoy7K1UtuA9c4YAgyODoHUIfrR3vbOSsOuDkM+2u/HPXhptAEGfCP4rZIii4jX2qqgi8Y4sy4IHfh4ObDP2Er/M7RPMp4bwPX66Oa8LzCgxcn4WaL2RuUNTgX3ssV35kAzLY06S76MJW2emusfxJOUvC0UMAxR3ak+YDJ878kqYIREnI5LN1u7ZJaktX1m6bnzuSXqYKN3ux2CiPQhm5BhCWjfaAokHpOGJ2I5vUNhOAc7aumqycfwbXGI7XhbGlN2YcWngQbi7KHo6wBag02E4Mp8G0tFHPHsnd60dPtvv9cgqz3n52s6rTJUCnV4xdO73garN1JdHghiHFuMkNqlbjgEEuL0Hz4yO3hY/bD9OXsyq9fqjUVqDolnbGoWTluioMfAUeitgd0W9LW/RypSSCUKrZzBJmmJtoew/up2N8QPjXf/w3GcT0BXw1Y7sEAqqdT11h7yius+7SINjHAV+mUZY8HNFz5ZPJFV6v/JqwHMY+W93C5Cn9OaAj7mEijtQsme4OTyF2nUqVJQF5MD+P87ufp7n5kIW/KW4IIiLw2w270iHRFl2tNCZjI/TBliabNmedJnseA1Io4zfXyBDDmhSLj2U6zI7bC6FVQFBMXXgakMD4OFO0XP6h6iai4c4gSVMvF8S55tyA7HyZ51LEo4snqw=
